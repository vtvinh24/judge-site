{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/FHCS-Team/judge/schemas/messages/hooks_execute_request.schema.json",
  "title": "Hook Execute Request Payload",
  "description": "Payload for `dmoj.hooks.execute.request` events for requesting execution of external/managed hooks.",
  "x-channel": "judge.hooks.execute",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "hook_id": { "type": "string", "description": "Identifier of the hook to run (from problem package or global hooks)" },
    "submission_id": { "type": ["string", "null"] },
    "problem_id": { "type": ["string", "null"] },
    "payload": { "type": ["object", "null"], "description": "Hook-specific payload (optional)" },
    "timeout_seconds": { "type": "integer", "minimum": 1, "default": 30 },
    "retries": { "type": "integer", "minimum": 0, "default": 0 },
    "async": { "type": "boolean", "default": false, "description": "If true, publisher expects an async hook.result event instead of a direct reply" },
    "metadata": { "type": "object", "additionalProperties": true }
  },
  "required": ["hook_id"]
}
